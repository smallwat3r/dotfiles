#!/usr/bin/env bash
# List processes listening on a given TCP port.
# Usage: ls-process-on-port <port>
set -euo pipefail

if [[ $# -ne 1 ]]; then
  echo "Usage: ${0##*/} <port>" >&2
  exit 1
fi

port=$1

if ! [[ $port =~ ^[0-9]+$ ]] || (( port < 1 || port > 65535 )); then
  echo "Error: port must be an integer between 1 and 65535." >&2
  exit 1
fi

lsof -nP -iTCP:"$port" -sTCP:LISTEN 2>/dev/null ||
  echo "No process listening on port $port"
