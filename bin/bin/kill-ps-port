#!/usr/bin/env bash
# Kill active process running on a specific port

set -e

if [[ -z $1 ]]; then
  printf 'Please specify a port.\n' >&2
  exit 1
fi

if [[ ! $1 =~ ^-?[0-9]+$ ]]; then
  printf 'Port number needs to be an integer.\n' >&2
  exit 1
fi

pid=$(lsof -t -i:"$1") || {
  printf 'No process found at this port.\n' >&2
  exit 1
}

kill -9 "$pid"
printf 'Process pid %s has been killed.\n' "$pid"
