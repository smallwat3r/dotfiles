# Lid switch handling
# Lock screen and disable laptop display when lid is closed, enable when opened
# Detect internal display dynamically (eDP/LVDS/DSI are common internal display prefixes)
set $get_internal swaymsg -t get_outputs -r | jq -r ".[].name" | grep -E "^(eDP|LVDS|DSI)-" | head -1

# Check lid state on reload (bindswitch only triggers on state change)
exec_always grep -q closed /proc/acpi/button/lid/*/state 2>/dev/null && \
    swaymsg output "$($get_internal)" disable

bindswitch --reload --locked lid:on exec \
    'swaylock && swaymsg output "$($get_internal)" disable'
bindswitch --reload --locked lid:off exec \
    'swaymsg output "$($get_internal)" enable'
