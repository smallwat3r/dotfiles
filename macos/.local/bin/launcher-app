#!/usr/bin/env bash
# Launch macOS applications using fzf.
# Searches Applications, System Applications, and Chrome Apps.
# Requires: fzf
set -euo pipefail

command -v fzf >/dev/null || { echo "fzf required" >&2; exit 1; }

FZF_OPTS="--reverse --color=bg:-1,bg+:-1,fg+:186,hl:115,hl+:115"

target=$(
  find \
    /Applications \
    /Applications/Utilities \
    /System/Applications \
    /System/Applications/Utilities \
    /System/Library/CoreServices \
    "$HOME/Applications" \
    "$HOME/Applications/Chrome Apps.localized" \
    -maxdepth 1 -type d -name '*.app' 2>/dev/null |
  FZF_DEFAULT_OPTS="$FZF_OPTS" fzf
) || exit 0

open "$target"
